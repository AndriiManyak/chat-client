(this.webpackJsonpchat_client=this.webpackJsonpchat_client||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(27),r=a.n(s),i=(a(62),a(28)),o=a.n(i),l=a(33),u=a.n(l),d=a(0),j=function(){return Object(d.jsx)("header",{className:u.a.header,children:Object(d.jsx)("h1",{className:u.a.title,children:"Chat bots 2.0"})})},b=a(3),m=a(5),_=a(13),p=a.n(_),f=a(6),O=a.n(f),h=a(4),g=a.n(h),v=(g.a.shape({id:g.a.oneOfType([g.a.string,g.a.number]).isRequired,name:g.a.string.isRequired,description:g.a.string.isRequired,image:g.a.string.isRequired,isOnline:g.a.bool.isRequired}),function(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),x=function(e){var t,a=e.type,c=e.author,s=e.time,r=e.text,i=e.seenTime,o=Object(n.useRef)();return Object(n.useEffect)((function(){o.current&&o.current.scrollIntoView({behavior:"smooth"})})),Object(d.jsxs)("div",{className:O()(p.a.message,(t={},Object(m.a)(t,p.a.sent,"sent"===a),Object(m.a)(t,p.a.received,"received"===a),t)),ref:o,children:[Object(d.jsxs)("div",{className:p.a.header,children:[Object(d.jsx)("p",{className:p.a.userName,children:c.name}),Object(d.jsx)("p",{className:p.a.time,children:v(s)})]}),Object(d.jsx)("p",{className:p.a.text,children:r}),"sent"===a&&i&&Object(d.jsxs)("div",{className:p.a.seenLabel,children:["Seen ",v(i).toLowerCase()]})]})},C=a(52),y=a.n(C),N=a(2),S=function(e,t){return e===t?"sent":"received"},T=a(23),M=a(57),A="connect_socket",w="send_message",E="join_chat",L="typing_message",k="ADD_MESSAGE",F="ADD_MESSAGES",I="ADD_CONTACTS",R="SET_USER",q="SELECT_CONTACT",D="SET_CONTACT_TYPING",B={messages:[],contacts:[],selectedContact:null,user:{},isContactTyping:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(b.a)(Object(b.a)({},e),{},{contacts:t.payload});case F:return Object(b.a)(Object(b.a)({},e),{},{messages:t.payload});case k:return Object(b.a)(Object(b.a)({},e),{},{messages:[].concat(Object(M.a)(e.messages),[t.payload])});case R:return Object(b.a)(Object(b.a)({},e),{},{user:t.payload});case q:return Object(b.a)(Object(b.a)({},e),{},{selectedContact:t.payload});case D:return Object(b.a)(Object(b.a)({},e),{},{isContactTyping:t.payload});default:return e}},G=function(e){return e.chatReducer.user},J=function(e){return e.chatReducer.selectedContact},U=function(e){return e.chatReducer.contacts},W=function(e){return e.chatReducer.messages},z=function(e){return e.chatReducer.isContactTyping},P=Object(T.b)({chatReducer:H}),V=function(){var e=Object(N.c)(W),t=Object(N.c)(G);return Object(d.jsx)("div",{className:y.a.list,children:e.map((function(e){return Object(d.jsx)(x,Object(b.a)({type:S(e.author.id,t.id)},e),e.id)}))})},X=a(15),Y=a(24),K=a.n(Y),Q=a(103),Z=function(){var e=Object(N.b)(),t=Object(N.c)(G),a=Object(N.c)(J),c=Object(N.c)(z),s=Object(n.useState)(""),r=Object(X.a)(s,2),i=r[0],o=r[1],l=Object(n.useState)(!1),u=Object(X.a)(l,2),j=u[0],b=u[1];Object(n.useEffect)((function(){!j&&i.length>0&&(b(!0),e({type:L}),setTimeout((function(){b(!1)}),5e3))}),[i]);return Object(d.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),i.trim()){var c={id:Object(Q.a)(),author:t,receiver:a,text:i,time:new Date};e({type:w,payload:c})}o("")},className:K.a.form,children:[c&&Object(d.jsxs)("div",{className:K.a.typingLabel,children:[a.name," is typing..."]}),Object(d.jsx)("input",{className:K.a.messageInput,type:"text",name:"message",value:i,onChange:function(e){o(e.target.value)},placeholder:"Start chatting!",autoComplete:"off"}),Object(d.jsx)("button",{type:"submit",className:K.a.submitButton,children:"Send message"})]})},$=a(54),ee=a.n($),te=function(){return Object(d.jsxs)("div",{className:ee.a.controller,children:[Object(d.jsx)(V,{}),Object(d.jsx)(Z,{})]})},ae=a(18),ne=a.n(ae),ce=function(e){var t=e.selectedContact;return Object(d.jsxs)("div",{className:ne.a.contact,children:[Object(d.jsx)("img",{src:t.image,alt:t.name,className:ne.a.image}),Object(d.jsxs)("div",{className:ne.a.information,children:[Object(d.jsx)("p",{className:ne.a.name,children:t.name}),Object(d.jsx)("p",{className:ne.a.description,children:t.description})]})]})},se=a(12),re=a.n(se),ie=function(){var e=Object(N.c)(J);return Object(d.jsx)("section",{className:se.body,children:e&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ce,{selectedContact:e}),Object(d.jsx)(te,{})]})})},oe=a(14),le=a.n(oe),ue=function(e){var t=e.contact,a=Object(N.b)(),n=function(e){a({type:E,payload:e})};return Object(d.jsxs)("div",{className:le.a.contact,onClick:function(){return n(t)},children:[Object(d.jsx)("div",{className:O()(le.a.imageWrapper,Object(m.a)({},le.a.online,t.isOnline)),children:Object(d.jsx)("img",{src:t.image,alt:t.name,className:le.a.image})}),Object(d.jsxs)("div",{className:le.a.information,children:[Object(d.jsx)("p",{className:le.a.name,children:t.name}),Object(d.jsx)("p",{className:le.a.description,children:t.description})]})]})},de=a(35),je=a.n(de),be=function(e){var t=e.activeTab,a=e.searchField,c=e.toggleSidebar,s=Object(N.c)(U),r=Object(N.c)(G),i=Object(n.useMemo)((function(){var e=s;return"online"===t&&(e=e.filter((function(e){return e.isOnline}))),e.filter((function(e){return e.id!==r.id})).filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}))}),[s,t,a]);return Object(d.jsx)("ul",{className:je.a.list,children:i.map((function(e){return Object(d.jsx)("li",{className:je.a.item,onClick:c,children:Object(d.jsx)(ue,{contact:e})},e.id)}))})},me=a(19),_e=a.n(me),pe=function(e){var t=e.activeTab,a=e.setActiveTab;return Object(d.jsxs)("div",{className:_e.a.controller,children:[Object(d.jsx)("div",{className:O()(_e.a.tab,Object(m.a)({},_e.a.active,"online"===t)),onClick:function(){return a("online")},children:"online"}),Object(d.jsx)("div",{className:O()(_e.a.tab,Object(m.a)({},_e.a.active,"all"===t)),onClick:function(){return a("all")},children:"all"})]})},fe=a(36),Oe=a.n(fe),he=function(e){var t=e.searchField,a=e.setSearchField;return Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault()},className:Oe.a.form,children:Object(d.jsx)("input",{type:"text",name:"search",className:Oe.a.input,value:t,onChange:function(e){a(e.target.value)},placeholder:"Search...",autoComplete:"off"})})},ge=a.p+"static/media/left_arrow.ccf14356.svg",ve=function(){var e=Object(n.useState)(!1),t=Object(X.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)("online"),r=Object(X.a)(s,2),i=r[0],o=r[1],l=Object(n.useState)(""),u=Object(X.a)(l,2),j=u[0],b=u[1],_=function(){c((function(e){return!e}))};return Object(d.jsxs)("aside",{className:O()(re.a.sidebar,Object(m.a)({},re.a.active,a)),children:[Object(d.jsxs)("div",{className:re.a.sidebarTop,children:[Object(d.jsx)("div",{className:re.a.sidebarToggleButton,onClick:_,children:Object(d.jsx)("img",{src:ge,alt:"arrow",className:re.a.sidebarToggleArrow})}),Object(d.jsx)(pe,{activeTab:i,setActiveTab:o}),Object(d.jsx)(be,{activeTab:i,searchField:j,toggleSidebar:_})]}),Object(d.jsx)(he,{searchField:j,setSearchField:b})]})},xe=function(){return Object(d.jsxs)("section",{className:se.chat,children:[Object(d.jsx)(ie,{}),Object(d.jsx)(ve,{})]})},Ce=function(e){return{type:R,payload:e}},ye=function(e){return{type:k,payload:e}},Ne=function(e){return{type:D,payload:e}},Se=function(){var e=Object(N.b)();Object(n.useEffect)((function(){t()}),[]);var t=function(){var t,a=localStorage.getItem("userInfo");a&&(t=JSON.parse(a)),e(Ce(t)),e({type:A,payload:t})};return Object(d.jsxs)("div",{className:o.a.app,children:[Object(d.jsx)(j,{}),Object(d.jsx)("main",{className:O()(o.a.main,"container"),children:Object(d.jsx)(xe,{})})]})},Te=a(55),Me=a(56),Ae=a.n(Me),we=function(e){return Ae()("https://immense-eyrie-03835.herokuapp.com/",{query:e})},Ee=[{event:"receive_contacts",handler:function(e){return function(t){e.dispatch(function(e){return{type:I,payload:e}}(t))}}},{event:"receive_created_user",handler:function(e){return function(t){e.dispatch(Ce(t)),localStorage.setItem("userInfo",JSON.stringify(t))}}},{event:"receive_message",handler:function(e){return function(t){e.dispatch(ye(t))}}},{event:"receive_messages",handler:function(e){return function(t){e.dispatch(function(e){return{type:F,payload:e}}(t))}}},{event:"receive_typing_message",handler:function(e){var t;return function(){e.dispatch(Ne(!0)),t&&clearTimeout(t),t=setTimeout((function(){e.dispatch(Ne(!1))}),5e3)}}}],Le=function(){var e=null;return function(t){return function(a){return function(n){switch(n.type){case A:e=we(n.payload);var c,s=Object(Te.a)(Ee);try{for(s.s();!(c=s.n()).done;){var r=c.value;e.on(r.event,r.handler(t))}}catch(o){s.e(o)}finally{s.f()}break;case w:e.emit(w,n.payload),t.dispatch(ye(n.payload));break;case E:e.emit(E,n.payload),t.dispatch((i=n.payload,{type:q,payload:i}));break;case L:e.emit(L);break;default:return a(n)}var i}}}}(),ke=Object(T.c)(P,Object(T.a)(Le));r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(N.a,{store:ke,children:Object(d.jsx)(Se,{})})}),document.getElementById("root"))},12:function(e,t,a){e.exports={chat:"Chat_chat__bntdf",body:"Chat_body__bzHhb",sidebar:"Chat_sidebar__38N0b",sidebarTop:"Chat_sidebarTop__39OU0",sidebarToggleButton:"Chat_sidebarToggleButton__Ufhl7",sidebarToggleArrow:"Chat_sidebarToggleArrow__3XnJU",active:"Chat_active__27YEB"}},13:function(e,t,a){e.exports={message:"Message_message__1F6Sp",received:"Message_received__2RoFv",header:"Message_header__1W_4i",text:"Message_text__3C1vz",sent:"Message_sent__2IEi5",userName:"Message_userName__1zL7V",time:"Message_time__30Ujx",seenLabel:"Message_seenLabel__22C_q"}},14:function(e,t,a){e.exports={contact:"Contact_contact__1vkzi",active:"Contact_active__GoqAI",imageWrapper:"Contact_imageWrapper__3PdCk",online:"Contact_online__1qe25",image:"Contact_image__1mA0N",information:"Contact_information__1Ka3c",name:"Contact_name__35GmJ",description:"Contact_description__isdHN"}},18:function(e,t,a){e.exports={contact:"ContactSelected_contact__EO5qQ",image:"ContactSelected_image__2FW0H",information:"ContactSelected_information__19Xtg",name:"ContactSelected_name__2qjGj",description:"ContactSelected_description__njTOV"}},19:function(e,t,a){e.exports={controller:"ContactsController_controller__15lvh",tab:"ContactsController_tab__tgTYU",active:"ContactsController_active__3qAAX"}},24:function(e,t,a){e.exports={form:"MessageForm_form__3ul-y",typingLabel:"MessageForm_typingLabel__3PrXV",messageInput:"MessageForm_messageInput__2THO5",submitButton:"MessageForm_submitButton__M4SOe"}},28:function(e,t,a){e.exports={app:"App_app__KgHPi",main:"App_main__2NTvN"}},33:function(e,t,a){e.exports={header:"Header_header__3FowY",title:"Header_title__3a9gv"}},35:function(e,t,a){e.exports={list:"ContactsList_list__20sWu"}},36:function(e,t,a){e.exports={form:"ContactsSearch_form__etLMa",input:"ContactsSearch_input__3xLIO"}},52:function(e,t,a){e.exports={list:"MessagesList_list__2SQac"}},54:function(e,t,a){e.exports={controller:"MessagesController_controller__mjjIB"}},62:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.9f2d1531.chunk.js.map